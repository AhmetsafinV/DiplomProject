
<p id="notice"><%= notice %></p>

<h3 class='text-center'>

  <%= @group.name %>
</br>
  <strong>Расписание:</strong>
  <%courses= @group.courses %>

</h3>


<div class="table-responsive">
<table class="table table-condensed table-hover table-striped" >
  <thead>
    <tr>
      <th>Время</th>
      <th>Название дисциплины</th>
      <th>Тип</th>
      <th>Аудитория</th>
      <th colspan="3"></th>
    </tr>
  </thead>
<tbody>
    <%flag = false%>
    <% courses.each do |course| %>
       <% if course.wday == 1 %>
       <% flag = true%>
      <% end %>
    <% end %>

      <% if flag == true %>
  <tr>

    <td colspan="4" >
       <b>Понедельник</b>
    </td>
  </tr>
    <% courses.order(:started_time).each do |course| %>
<% if course.wday == 1  %>

    <tr>

    <%if ((course.finished_time%60)>9)%>
    <td><%= (course.started_time / 60).to_s + ":" +  (course.started_time % 60).to_s + "-" + (course.finished_time / 60).to_s + ":" + (course.finished_time % 60).to_s %></td>
    <%else%>
    <td><%= (course.started_time / 60).to_s + ":"  + (course.started_time % 60).to_s  + "-" + (course.finished_time / 60).to_s + ":" + "0" + (course.finished_time % 60).to_s %></td>
    <% end %>
      <td> <%= link_to course.name, lessons_path(course: course.id, group: @group.id) %></td>
      <td><%= course.human_htype %></td>
      <td><%= course.room_name %></td>
    </tr>
    <% end %>
    <% end %>

    <% end %>

    <%flag = false%>
    <% courses.each do |course| %>
       <% if course.wday == 2 %>
       <% flag = true%>
      <% end %>
    <% end %>

      <% if flag == true %>

    <tr>
      <td colspan="4", align="center">
        <b>Вторник</b>
      </td>
    </tr>
      <% courses.order(:started_time).each do |course| %>
  <% if course.wday == 2  %>

      <tr>

        <%if ((course.finished_time%60)>9)%>
          <td><%= (course.started_time / 60).to_s + ":" +  (course.started_time % 60).to_s + "-" + (course.finished_time / 60).to_s + ":" + (course.finished_time % 60).to_s %></td>
          <%else%>
          <td><%= (course.started_time / 60).to_s + ":"  + (course.started_time % 60).to_s  + "-" + (course.finished_time / 60).to_s + ":" + "0" + (course.finished_time % 60).to_s %></td>
        <% end %>
        <td> <%= link_to course.name, lessons_path(course: course.id, group: @group.id) %></td>
        <td><%= course.human_htype %></td>
        <td><%= course.room_name %></td>
      </tr>
      <% end %>
      <% end %>
      <% end %>

      <%flag = false%>
      <% courses.each do |course| %>
         <% if course.wday == 3 %>
         <% flag = true%>
        <% end %>
      <% end %>

        <% if flag == true %>

      <tr>
        <td colspan="4", align="center">
        <b>Среда</b>
        </td>
      </tr>
        <% courses.order(:started_time).each do |course| %>
    <% if course.wday ==3  %>

        <tr>

          <%if ((course.finished_time%60)>9)%>
            <td><%= (course.started_time / 60).to_s + ":" +  (course.started_time % 60).to_s + "-" + (course.finished_time / 60).to_s + ":" + (course.finished_time % 60).to_s %></td>
            <%else%>
            <td><%= (course.started_time / 60).to_s + ":"  + (course.started_time % 60).to_s  + "-" + (course.finished_time / 60).to_s + ":" + "0" + (course.finished_time % 60).to_s %></td>
          <% end %>
          <td> <%= link_to course.name, lessons_path(course: course.id, group: @group.id) %></td>
          <td><%= course.human_htype %></td>
          <td><%= course.room_name %></td>
        </tr>
        <% end %>
        <% end %>
        <% end %>

        <%flag = false%>
        <% courses.each do |course| %>
           <% if course.wday == 4 %>
           <% flag = true%>
          <% end %>
        <% end %>

          <% if flag == true %>

        <tr>
          <td colspan="4", align="center">
          <b>Четверг</b>
          </td>
        </tr>
          <% courses.order(:started_time).each do |course| %>
      <% if course.wday == 4  %>

          <tr>

            <%if ((course.finished_time%60)>9)%>
              <td><%= (course.started_time / 60).to_s + ":" +  (course.started_time % 60).to_s + "-" + (course.finished_time / 60).to_s + ":" + (course.finished_time % 60).to_s %></td>
              <%else%>
              <td><%= (course.started_time / 60).to_s + ":"  + (course.started_time % 60).to_s  + "-" + (course.finished_time / 60).to_s + ":" + "0" + (course.finished_time % 60).to_s %></td>
            <% end %>
            <td> <%= link_to course.name, lessons_path(course: course.id, group: @group.id) %></td>
            <td><%= course.human_htype %></td>
            <td><%= course.room_name %></td>
          </tr>
          <% end %>
          <% end %>
          <% end %>

          <%flag = false%>
          <% courses.each do |course| %>
             <% if course.wday == 5 %>
             <% flag = true%>
            <% end %>
          <% end %>

            <% if flag == true %>

          <tr>
            <td colspan="4", align="center">
              <b>Пятница</b>
            </td>
          </tr>
            <% courses.order(:started_time).each do |course| %>
        <% if course.wday == 5  %>

            <tr>

              <%if ((course.finished_time%60)>9)%>
                <td><%= (course.started_time / 60).to_s + ":" +  (course.started_time % 60).to_s + "-" + (course.finished_time / 60).to_s + ":" + (course.finished_time % 60).to_s %></td>
                <%else%>
                <td><%= (course.started_time / 60).to_s + ":"  + (course.started_time % 60).to_s  + "-" + (course.finished_time / 60).to_s + ":" + "0" + (course.finished_time % 60).to_s %></td>
              <% end %>
              <td> <%= link_to course.name, lessons_path(course: course.id, group: @group.id) %></td>
              <td><%= course.human_htype %></td>
              <td><%= course.room_name %></td>
            </tr>
            <% end %>
            <% end %>
            <% end %>


            <%flag = false%>
            <% courses.each do |course| %>
               <% if course.wday == 6 %>
               <% flag = true%>
              <% end %>
            <% end %>

              <% if flag == true %>

            <tr>
              <td colspan="4", align="center">
              <b>Суббота</b>
              </td>
            </tr>
              <% courses.order(:started_time).each do |course| %>
          <% if course.wday == 6  %>

              <tr>

                <%if ((course.finished_time%60)>9)%>
                  <td><%= (course.started_time / 60).to_s + ":" +  (course.started_time % 60).to_s + "-" + (course.finished_time / 60).to_s + ":" + (course.finished_time % 60).to_s %></td>
                  <%else%>
                  <td><%= (course.started_time / 60).to_s + ":"  + (course.started_time % 60).to_s  + "-" + (course.finished_time / 60).to_s + ":" + "0" + (course.finished_time % 60).to_s %></td>
                <% end %>
                <td> <%= link_to course.name, lessons_path(course: course.id, group: @group.id) %></td>
                <td><%= course.human_htype %></td>
                <td><%= course.room_name %></td>
              </tr>
              <% end %>
              <% end %>
              <% end %>
  </tbody>
</table>
</div>
<br>
